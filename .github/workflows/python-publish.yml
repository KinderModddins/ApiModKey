name: Publish Python üêç distribution to PyPI

on:
  push:
    branches:
      - master  # –ò–ª–∏ –≤–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä 'master'

jobs:
  build:
    runs-on: ubuntu-latest  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Ubuntu –¥–ª—è —Å–±–æ—Ä–∫–∏

    steps:
      # –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      - name: Checkout code
        uses: actions/checkout@v2

      # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'  # –£–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é Python

      # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–∞
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install build twine

      # –°–æ–±–∏—Ä–∞–µ–º –ø–∞–∫–µ—Ç
      - name: Build the package
        run: python -m build

      # –ü—É–±–ª–∏–∫—É–µ–º –Ω–∞ PyPI
      - name: Publish to PyPI
        env:
          PYPI_USERNAME: ${{ secrets.PYPI_USERNAME }}
          PYPI_PASSWORD: ${{ secrets.PYPI_PASSWORD }}
        run: |
          python -m twine upload dist/*
